/*
* WidowFix v1.0.0 Copyright (c) 2016 AJ Savino
* https://github.com/koga73/WidowFix
* MIT LICENSE
*/
var WidowFix=function(){var n=null,e={WIDOW_REGEX:/\S+[\x20|\x2D]\S+\s*(<|$)/gi,STD_TAGS:["p","span","a","h1","h2","h3","h4","h5","h6"],PHRASES:[]},t={runElements:function(r,a){"undefined"==typeof r&&(r=t._getElementsByTags(e.STD_TAGS)),"undefined"==typeof a&&(a=e.PHRASES);for(var i=r.length,f=0;i>f;f++){var u=r[f];"false"==u.getAttribute("data-widowfix")&&(r.splice(f,1),i--,f--);for(var o=0;i>o;o++)u!=r[o]&&t._elementContains(u,r[o])&&(r.splice(o,1),i--,o--)}for(var f=0;i>f;f++){var u=r[f];u.innerHTML=n.runString(u.innerHTML,a)}},runString:function(n,r){"undefined"==typeof r&&(r=e.PHRASES);for(var a=r.length,i=0;a>i;i++)n=t._fix(n,new RegExp(r[i],"i"));return n=t._fix(n,e.WIDOW_REGEX)},_fix:function(n,t){for("undefined"==typeof t&&(t=e.WIDOW_REGEX);match=t.exec(n);){var r=match.index;match=match[0];var a=match.length;match=match.replace(/\x20/gi,"&nbsp;"),match=match.replace(/\x2D/gi,"&#8209;"),n=n.substr(0,r)+match+n.substr(r+a,n.length-(r+a))}return n},_getElementsByTags:function(n,e){var t=[];if("undefined"==typeof n)return t;"undefined"==typeof e&&(e=document);for(var r=n.length,a=0;r>a;a++){var i=document.getElementsByTagName(n[a]);if(i.length)for(var f=i.length,u=0;f>u;u++)t=t.concat(i[u])}return t},_elementContains:function(n,e){return n.contains?n.contains(e):!1}};return n={runElements:t.runElements,runString:t.runString}}();